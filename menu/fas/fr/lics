#!/bin/bash
#
#	Checks filelist generated by fedora preview
#
#	Variables
#
	. /usr/share/script-tools/st.cfg
	cd $HOME
	list_id=$(ls|grep ^[1-9][0-9]*-)
	ID=$(sea_select $list_id)
	LIC_CHECK=~/$ID/licensecheck.txt
	LIC_FILES=""
	NUM=0
	LIC_FOUND=""
	INDI="."
#
#	Display
#
	sE "Selected: $ID"
	sT "Open files in $LIC_CHECK"
	for line in $(grep "/" $LIC_CHECK)
	do	for string in CC GPL
		do	thisname=$(basename $line)
			sP "Check for $string info in $thisname$INDI"
			found=""
			found="$(echo $(grep $string $line|sed s,' ','',g))"
			if [ ! "" = "$(echo $found)" ]
			then	LIC_FOUND+="FILE: $thisname --- $found\n"
			fi
			INDI+="."
			[ 4 -gt ${#INDI} ] && INDI="."
		done
		LIC_FILES+=" $thisname"
		let NUM++
	done
	sE "Worked on these $NUM files:" "$(echo $LIC_FILES)"
	#for this in $LIC_FILES;do sE " * $this";done
	sT "Found these possilble values as licenses:"
	if [ "" = "$(echo $LIC_FOUND)" ]
	then	ReportStatus 1 "Nothing found"
	else	for this in "$(echo $LIC_FOUND)"
		do	sE " * $(echo $this|sed s,\n,'',g|sed s,'\\','',g)"
		done
	fi
